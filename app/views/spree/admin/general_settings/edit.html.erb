<% content_for :page_title do %>
  <%= Spree.t(:general_settings) %>
<% end %>

<%= form_tag admin_general_settings_path, method: :put, multipart: true do %>
  <div id="preferences" data-hook>

    <fieldset class="general no-border-top">

      <%= fields_for :store do |f| %>
        <div class="row">
          <div class="col-xs-12 col-md-6">
            <div class="form-group" data-hook="admin_general_setting_input_name">
              <%= f.label :name %>
              <%= f.text_field :name, class: 'form-control' %>
            </div>
          </div>

          <div class="col-xs-12 col-md-6">
            <div class="form-group" data-hook="admin_general_setting_input_url">
              <%= f.label :url %>
              <%= f.text_field :url, class: 'form-control' %>
            </div>
          </div>

        </div>

        <div class="row">

          <div class="col-xs-12 col-md-6">
            <div class="form-group" data-hook="admin_general_setting_mail_from_address">
              <%= f.label :mail_from_address %>
              <%= f.text_field :mail_from_address, class: 'form-control' %>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-12 col-md-6">

            <%#-------------------------------------------------%>
            <%# Country Settings                               %>
            <%#-------------------------------------------------%>
            <div class="panel panel-default country">
              <div class="panel-heading">
                <h1 class="panel-title">
                  <%= Spree.t(:country_settings) %>
                </h1>
              </div>

              <div class="panel-body">
                <div class="form-group">
                  <%= f.label :country_id, Spree.t(:choose_country) %>
                  <%= f.select :country_id, country_options, {}, class: 'select2' %>
                </div>
              </div>
            </div>
          </div>
        </div>


        <div class="row">
          <div class="col-xs-12 col-md-12">

            <%#-------------------------------------------------%>
            <%# SEO Properties                               %>
            <%#-------------------------------------------------%>
            <div class="panel panel-default country">
              <div class="panel-heading">
                <h1 class="panel-title">
                  <%== t('.seo_properties') %>
                </h1>
              </div>
              <div class="panel-body">

                <div class="col-xs-12 col-md-6">
                  <div class="form-group" data-hook="admin_general_setting_input_seo_title">
                    <%= f.label :seo_title %>
                    <%= f.text_field :seo_title, class: 'form-control' %>
                  </div>
                </div>

                <div class="col-xs-12 col-md-6">
                  <div class="form-group" data-hook="admin_general_setting_input_meta_keywords">
                    <%= f.label :meta_keywords %>
                    <%= f.text_field :meta_keywords, class: 'form-control' %>
                  </div>
                </div>

                <div class="col-xs-12 col-md-6">
                  <div class="form-group" data-hook="admin_general_setting_input_meta_description">
                    <%= f.label :meta_description %>
                    <%= f.text_field :meta_description, class: 'form-control' %>
                  </div>
                </div>

                <div class="col-xs-12 col-md-6">
                  <%= f.field_container :robots, class: ['form-group'] do %>
                    <%= f.label :robots, t('.robots') %>
                    <%= f.text_area :robots, rows: 3, class: 'form-control' %>
                  <% end %>
                </div>

              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-12 col-md-12">

            <%#-------------------------------------------------%>
            <%# Social Properties                               %>
            <%#-------------------------------------------------%>
            <div class="panel panel-default country">
              <div class="panel-heading">
                <h1 class="panel-title">
                  <%== t('.social_properties') %>
                </h1>
              </div>
              <div class="panel-body">

                <div class="col-xs-12 col-md-6">
                  <div class="form-group" data-hook="admin_general_setting_input_seo_title">
                    <%= f.label :og_title %>
                    <%= f.text_field :og_title, class: 'form-control' %>
                  </div>
                </div>

                <div class="col-xs-12 col-md-6">
                  <div class="form-group" data-hook="admin_general_setting_input_meta_description">
                    <%= f.label :og_description %>
                    <%= f.text_field :og_description, class: 'form-control' %>
                  </div>
                </div>

                <div class="col-xs-12 col-md-6">
                  <%= f.field_container :og_image, class: ['form-group'] do %>
                    <%= f.label :og_image, t('.og_image') %>
                    <br />
                    <%= link_to image_tag(@store.og_image.url(:admin)), @store.og_image.url if @store.og_image? %>
                    <br />
                    <%= f.file_field :og_image %>
                    <p class="help-block">1200x630, PNG</p>
                  <% end %>
                </div>

              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-12 col-md-12">

            <%#-------------------------------------------------%>
            <%# Social Links                               %>
            <%#-------------------------------------------------%>
            <div class="panel panel-default country">
              <div class="panel-heading">
                <h1 class="panel-title">
                  <%== t('.social_links') %>
                </h1>
              </div>
              <div class="panel-body">

                <div class="col-xs-12 col-md-6">
                  <div class="form-group" data-hook="admin_general_setting_input_seo_title">
                    <%= f.label :fb_link, t('.facebook_link') %>
                    <%= f.text_field :fb_link, class: 'form-control' %>
                  </div>
                </div>

                <div class="col-xs-12 col-md-6">
                  <div class="form-group" data-hook="admin_general_setting_input_meta_description">
                    <%= f.label :tw_link, t('.twitter_link') %>
                    <%= f.text_field :tw_link, class: 'form-control' %>
                  </div>
                </div>

                <div class="col-xs-12 col-md-6">
                  <div class="form-group" data-hook="admin_general_setting_input_meta_description">
                    <%= f.label :ig_link, t('.instagram_link') %>
                    <%= f.text_field :ig_link, class: 'form-control' %>
                  </div>
                </div>

                <div class="col-xs-12 col-md-6">
                  <div class="form-group" data-hook="admin_general_setting_input_meta_description">
                    <%= f.label :yt_link, t('.youtube_link') %>
                    <%= f.text_field :yt_link, class: 'form-control' %>
                  </div>
                </div>

                <div class="col-xs-12 col-md-6">
                  <div class="form-group" data-hook="admin_general_setting_input_meta_description">
                    <%= f.label :vk_link, t('.Vkontakte_link') %>
                    <%= f.text_field :vk_link, class: 'form-control' %>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-12 col-md-12">
            <div class="panel panel-default country">
              <div class="panel-heading">
                <h1 class="panel-title">
                  <%== t('.downloads_page') %>
                </h1>
              </div>
              <div class="panel-body">

                <div class="col-xs-12 col-md-6">
                  <div class="form-group" data-hook="admin_general_setting_input_seo_title">
                    <%= f.label :downloads_blank_text, t('.blank_text') %>
                    <%= f.text_field :downloads_blank_text, class: 'form-control' %>
                  </div>
                </div>

                <div class="col-xs-12 col-md-6">
                  <%= f.field_container :downloads_blank_icon, class: ['form-group'] do %>
                    <%= f.label :downloads_blank_icon, t('.blank_icon') %>
                    <br />
                    <%= link_to image_tag(@store.downloads_blank_icon.url(:admin)), @store.downloads_blank_icon.url if @store.downloads_blank_icon? %>
                    <br />
                    <%= f.file_field :downloads_blank_icon %>
                    <p class="help-block">500x500, PNG</p>
                  <% end %>
                </div>

              </div>
            </div>
          </div>
        </div>

      <% end %>

      <div class="row">
        <div class="col-xs-12 col-md-6">
          <%#-------------------------------------------------%>
          <%# Security settings                               %>
          <%#-------------------------------------------------%>
          <% if @preferences_security.any? %>
            <div class="panel panel-default security">
              <div class="panel-heading">
                <h1 class="panel-title">
                  <%= Spree.t(:security_settings) %>
                </h1>
              </div>

              <div class="panel-body">
                <% @preferences_security.each do |key|
                  type = Spree::Config.preference_type(key)  %>
                  <div class="checkbox">
                    <%= label_tag key do %>
                      <%= preference_field_tag(key, Spree::Config[key], type: type) %>
                      <%= Spree.t(key) %>
                    <% end %>
                  </div>
                <% end %>
              </div>
            </div>
          <% end %>

          <%#-------------------------------------------------%>
          <%# Clear cache                                     %>
          <%#-------------------------------------------------%>
          <div class="panel panel-default">
            <div class="panel-heading">
              <h1 class="panel-title"><%= Spree.t(:clear_cache) %></h1>
            </div>

            <div class="panel-body">
              <div class="clear-cache-warning alert alert-warning">
                <%= Spree.t(:clear_cache_warning) %>
              </div>
              <div data-hook="general_settings_clear_cache">
                <%= button Spree.t(:clear_cache), 'ok', 'button', id: "clear_cache" %>
              </div>
            </div>
          </div>

        </div>
        <div class="col-xs-12 col-md-6">

          <%#-------------------------------------------------%>
          <%# Currency Settings                               %>
          <%#-------------------------------------------------%>
          <div class="panel panel-default currency">
            <div class="panel-heading">
              <h1 class="panel-title">
                <%= Spree.t(:currency_settings) %>
              </h1>
            </div>

            <div class="panel-body">
              <div class="form-group">
                <%= label_tag :currency, Spree.t(:choose_currency) %>
                <%= select_tag :currency, currency_options %>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="form-actions" data-hook="buttons">
        <%= button Spree.t('actions.update'), 'save' %>
        <span class="or"><%= Spree.t(:or) %></span>
        <%= button_link_to Spree.t('actions.cancel'), edit_admin_general_settings_url, icon: 'delete' %>
      </div>

    </fieldset>

  </div>

<% end %>

<script>
    $('#store_default_currency').select2();
    $('#currency').select2();
</script>
